language: go 

go:
    - 1.7.x
    - master
before_install:
    - mkdir ./server/secrets
    - echo -e "package secrets\n\nconst SubSecret=\"aaa\"\nconst SECRET=\"aaaa\"\nconst DB_DIAL_URL=\"mongodb://localhost\"" > ./server/secrets/secret.go 
    - npm install -g npm3
    - npm -v

install: 
    - go get ./server
    - go get "github.com/stretchr/testify/assert"
    - cd ./web-client; npm install; cd ..
script: 
    - go test -v ./server/tests
    - cd ./web-client; npm run test; cd ..
